(self["webpackChunkcompleted_pro"]=self["webpackChunkcompleted_pro"]||[]).push([[551],{3551:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"note-manage"},[r("div",{staticClass:"select-box"},[r("div",[r("span",[e._v("类目：")]),r("el-select",{staticStyle:{"margin-right":"16px"},attrs:{placeholder:"请选择"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}},e._l(e.categoryList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleSearch}},[r("span",[e._v("搜索")])]),r("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleReset}},[r("span",[e._v("重置")])])],1),r("div",[r("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.handleAddNote}},[r("span",[e._v("添加笔记")])])],1)]),r("div",{staticClass:"notes-box"},[r("el-table",{ref:"tableRef",attrs:{data:e.tableList,height:"calc(100vh - 320px)",border:""}},e._l(e.tableColumnList,(function(t){return r("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,align:"center",width:t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return["category_id"===t.prop?r("div",[r("div",{staticClass:"el-tooltip cell no-padding"},[e._v(" "+e._s(e._f("categoryFilter")(a[t.prop],e.categoryList))+" ")])]):"operation"===t.prop?r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleUpdateItem(a)}}},[r("span",[e._v("编辑")])]),r("el-divider",{attrs:{direction:"vertical"}}),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDeleteItem(a)}}},[r("span",[e._v("删除")])])],1):r("div",{staticClass:"el-tooltip cell no-padding"},[e._v(" "+e._s(a[t.prop])+" ")])]}}],null,!0)})})),1),r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.page,"page-size":e.size,total:e.total},on:{"current-change":e.handleChange}})],1),r("notes-operation-dialog",{attrs:{visible:e.visible,title:e.title,id:e.editId},on:{"update:visible":function(t){e.visible=t},"update-data":e.handleUpdateData}})],1)},a=[],i=r(8534),o=(r(5666),r(8309),r(9826),r(1539),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notes-operation-dialog"},[r("el-dialog",{attrs:{title:e.title,visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose,width:"800px"},on:{"update:visible":function(t){e.visible=t},open:e.init}},[r("div",{staticClass:"dialog-container"},[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"简介：",prop:"introduction"}},[r("el-input",{attrs:{placeholder:"请输入简介",clearable:""},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),r("el-form-item",{attrs:{label:"类目：",prop:"category"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categoryList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{prop:"content",label:"内容："}},[r("quill-editor",{ref:"myQuillEditor",staticClass:"editor",attrs:{options:e.editorOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1),r("template",{slot:"footer"},[r("el-button",{attrs:{type:"plain"},on:{click:e.handleClose}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1)],2)],1)}),s=[],c=(r(9653),{name:"NotesOperationDialog",props:{visible:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return"请输入标题"}},id:{type:Number,default:function(){return 0}}},data:function(){var e=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],t={title:[{required:!0,trigger:"blur",message:"不能为空"}],introduction:[{required:!0,trigger:"blur",message:"不能为空"}],category:[{required:!0,trigger:"blur",message:"不能为空"}],content:[{required:!0,trigger:"blur",message:"不能为空"}]};return{form:{title:"",introduction:"",category:"",content:""},rules:t,categoryList:[],editorOption:{theme:"snow",placeholder:"您想发布点什么？",modules:{toolbar:{container:e}}}}},methods:{init:function(){this.getCategory(),"编辑笔记"===this.title&&this.getNoteDetail()},handleClose:function(){return this.form={title:"",introduction:"",category:"",content:""},this.$emit("update:visible",!1),!1},handleConfirm:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("添加笔记"!==e.title){t.next=5;break}return t.next=3,e.handleAdd();case 3:t.next=7;break;case 5:return t.next=7,e.handleEdit();case 7:e.$emit("update-data",!1),e.handleClose();case 9:case"end":return t.stop()}}),t)})))()},getNoteDetail:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={id:e.id},t.next=5,e.$api.client.getNoteDetail(r);case 5:n=t.sent,1===n.code?(a=n.data.notes,e.form.title=a.title,e.form.introduction=a.introduction,e.form.category=a.category_id,e.form.content=a.content):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},handleAdd:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.form,t.next=4,e.$api.server.addNotes(r);case 4:n=t.sent,1===n.code?e.$message.success(n.msg):e.$message.error(n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error("发生错误");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleEdit:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.form,r.id=e.id,t.next=5,e.$api.server.editNotes(r);case 5:n=t.sent,1===n.code?e.$message.success(n.msg):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getCategory:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={},t.next=4,e.$api.server.getCategoryList(r);case 4:n=t.sent,1===n.code?(a=n.data,e.categoryList=a.categoryList):e.$message.error(n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error("发生错误");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),l=c,u=r(3736),p=(0,u.Z)(l,o,s,!1,null,"01c95a74",null),d=p.exports,f={name:"NoteManage",components:{notesOperationDialog:d},data:function(){var e=[{label:"ID",prop:"id"},{label:"标题",prop:"title"},{label:"简介",prop:"introduction"},{label:"类目",prop:"category_id"},{label:"操作",prop:"operation"}];return{category:"",categoryList:[],tableColumnList:e,tableList:[],page:1,size:10,total:0,loading:!1,title:"",visible:!1,editId:0}},filters:{categoryFilter:function(e,t){return t.find((function(t){return t.id===e})).name}},methods:{handleUpdateData:function(){this.getNotes()},handleReset:function(){this.category="",this.getNotes()},handleChange:function(e){this.page=e,this.getNotes()},handleDeleteItem:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.id,r.prev=1,r.next=4,t.$confirm("此操作将永久删除该笔记，是否继续？","提示",{type:"warning"});case 4:return a={id:n},r.next=7,t.$api.server.deltNotes(a);case 7:return t.$message.success("删除成功"),r.next=10,t.getNotes();case 10:r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),t.$message.info("取消删除");case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},handleUpdateItem:function(e){var t=e.id;this.editId=t,this.title="编辑笔记",this.visible=!0},handleAddNote:function(){this.title="添加笔记",this.visible=!0},handleSearch:function(){this.getNotes()},getNotes:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={page:e.page,size:e.size,category:e.category},t.next=5,e.$api.server.getNotes(r);case 5:n=t.sent,1===n.code?(a=n.data,e.tableList=a.notesList,e.total=a.total):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},getCategory:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={},t.next=4,e.$api.server.getCategoryList(r);case 4:n=t.sent,1===n.code?(a=n.data,e.categoryList=a.categoryList):e.$message.error(n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error("发生错误");case 11:return t.prev=11,t.finish(11);case 13:case"end":return t.stop()}}),t,null,[[0,8,11,13]])})))()}},created:function(){this.getNotes(),this.getCategory()}},g=f,m=(0,u.Z)(g,n,a,!1,null,"7ba9b95a",null),v=m.exports},2092:function(e,t,r){var n=r(9974),a=r(1702),i=r(8361),o=r(7908),s=r(6244),c=r(5417),l=a([].push),u=function(e){var t=1==e,r=2==e,a=3==e,u=4==e,p=6==e,d=7==e,f=5==e||p;return function(g,m,v,h){for(var b,y,x=o(g),k=i(x),w=n(m,v),N=s(k),_=0,$=h||c,C=t?$(g,N):r||d?$(g,0):void 0;N>_;_++)if((f||_ in k)&&(b=k[_],y=w(b,_,x),e))if(t)C[_]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return _;case 2:l(C,b)}else switch(e){case 4:return!1;case 7:l(C,b)}return p?-1:a||u?u:C}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},7475:function(e,t,r){var n=r(7854),a=r(3157),i=r(4411),o=r(111),s=r(5112),c=s("species"),l=n.Array;e.exports=function(e){var t;return a(e)&&(t=e.constructor,i(t)&&(t===l||a(t.prototype))?t=void 0:o(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?l:t}},5417:function(e,t,r){var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},9587:function(e,t,r){var n=r(614),a=r(111),i=r(7674);e.exports=function(e,t,r){var o,s;return i&&n(o=t.constructor)&&o!==r&&a(s=o.prototype)&&s!==r.prototype&&i(e,s),e}},3157:function(e,t,r){var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},3111:function(e,t,r){var n=r(1702),a=r(4488),i=r(1340),o=r(1361),s=n("".replace),c="["+o+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),p=function(e){return function(t){var r=i(a(t));return 1&e&&(r=s(r,l,"")),2&e&&(r=s(r,u,"")),r}};e.exports={start:p(1),end:p(2),trim:p(3)}},863:function(e,t,r){var n=r(1702);e.exports=n(1..valueOf)},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9826:function(e,t,r){"use strict";var n=r(2109),a=r(2092).find,i=r(1223),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},9653:function(e,t,r){"use strict";var n=r(9781),a=r(7854),i=r(1702),o=r(4705),s=r(8052),c=r(2597),l=r(9587),u=r(7976),p=r(2190),d=r(7593),f=r(7293),g=r(8006).f,m=r(1236).f,v=r(3070).f,h=r(863),b=r(3111).trim,y="Number",x=a[y],k=x.prototype,w=a.TypeError,N=i("".slice),_=i("".charCodeAt),$=function(e){var t=d(e,"number");return"bigint"==typeof t?t:C(t)},C=function(e){var t,r,n,a,i,o,s,c,l=d(e,"number");if(p(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=b(l),t=_(l,0),43===t||45===t){if(r=_(l,2),88===r||120===r)return NaN}else if(48===t){switch(_(l,1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(i=N(l,2),o=i.length,s=0;s<o;s++)if(c=_(i,s),c<48||c>a)return NaN;return parseInt(i,n)}return+l};if(o(y,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var I,R=function(e){var t=arguments.length<1?0:x($(e)),r=this;return u(k,r)&&f((function(){h(r)}))?l(Object(t),r,R):t},E=n?g(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;E.length>L;L++)c(x,I=E[L])&&!c(R,I)&&v(R,I,m(x,I));R.prototype=k,k.constructor=R,s(a,y,R,{constructor:!0})}}}]);