(self["webpackChunkcompleted_pro"]=self["webpackChunkcompleted_pro"]||[]).push([[78],{2078:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"category-manage"},[r("div",{staticClass:"add-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加类目")])],1),r("el-table",{ref:"tableRef",attrs:{data:e.tableList,height:"calc(100vh - 320px)",border:""}},e._l(e.tableColumnList,(function(t){return r("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,align:"center",width:t.width,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return["operation"===t.prop?r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),r("el-divider",{attrs:{direction:"vertical"}}),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDel(a)}}},[e._v("删除")])],1):r("div",{staticClass:"el-tooltip cell no-padding"},[e._v(e._s(a[t.prop]))])]}}],null,!0)})})),1),r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.page,"page-size":e.size,total:e.total},on:{"current-change":e.handleChange}}),r("category-operation-dialog",{attrs:{visible:e.visible,title:e.title,id:e.editId},on:{"update:visible":function(t){e.visible=t},"update-data":e.handleUpdateData}})],1)},a=[],i=r(8534),o=(r(2707),r(5666),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notes-operation-dialog"},[r("el-dialog",{attrs:{title:e.title,visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose,width:"800px"},on:{"update:visible":function(t){e.visible=t},open:e.init}},[r("div",{staticClass:"dialog-container"},[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"名称：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"排序：",prop:"instruction"}},[r("el-input",{attrs:{placeholder:"请输入排序",clearable:""},model:{value:e.form.index,callback:function(t){e.$set(e.form,"index",t)},expression:"form.index"}})],1)],1)],1),r("template",{slot:"footer"},[r("el-button",{attrs:{type:"plain"},on:{click:e.handleClose}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1)],2)],1)}),s=[],l=(r(9653),r(8309),{name:"NotesOperationDialog",props:{visible:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return"请输入标题"}},id:{type:Number,default:function(){return 0}}},data:function(){var e={name:[{required:!0,trigger:"blur",message:"不能为空"}],index:[{required:!0,trigger:"blur",message:"不能为空"}]};return{form:{name:"",index:""},rules:e}},methods:{init:function(){"编辑类目"===this.title&&this.getCategoryDetail()},handleClose:function(){return this.form={name:"",index:""},this.$emit("update:visible",!1),!1},handleConfirm:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("添加类目"!==e.title){t.next=5;break}return t.next=3,e.handleAdd();case 3:t.next=7;break;case 5:return t.next=7,e.handleEdit();case 7:e.$emit("update-data",!1),e.handleClose();case 9:case"end":return t.stop()}}),t)})))()},getCategoryDetail:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={id:e.id},t.next=5,e.$api.server.getCategoryDetail(r);case 5:n=t.sent,1===n.code?(a=n.data.category,e.form.name=a.name,e.form.index=a.index):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},handleAdd:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.form,t.next=4,e.$api.server.addCategory(r);case 4:n=t.sent,1===n.code?e.$message.success(n.msg):e.$message.error(n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error("发生错误");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleEdit:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.form,r.id=e.id,t.next=5,e.$api.server.editCategory(r);case 5:n=t.sent,1===n.code?e.$message.success(n.msg):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}}),c=l,u=r(3736),d=(0,u.Z)(c,o,s,!1,null,"43e16d48",null),p=d.exports,f={name:"CategoryManage",components:{CategoryOperationDialog:p},data:function(){var e=[{label:"ID",prop:"id"},{label:"名称",prop:"name"},{label:"排序",prop:"index"},{label:"操作",prop:"operation"}],t=[{id:1,name:"标题1",index:"1"}];return{tableColumnList:e,tableList:t,page:1,size:10,total:0,loading:!1,visible:!1,title:"",editId:0}},methods:{handleUpdateData:function(){this.getCategory()},handleAdd:function(){this.title="添加类目",this.visible=!0},handleEdit:function(e){var t=e.id;this.editId=t,this.title="编辑类目",this.visible=!0},handleDel:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.id,r.prev=1,r.next=4,t.$confirm("此操作将永久删除该类目，是否继续？","提示",{type:"warning"});case 4:return a={id:n},r.next=7,t.$api.server.delCategory(a);case 7:return t.$message.success("删除成功"),r.next=10,t.getCategory();case 10:r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),t.$message.info("取消删除");case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},handleChange:function(e){this.page=e,this.getCategory()},getCategory:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={page:e.page,size:e.size},t.next=5,e.$api.server.getCategory(r);case 5:n=t.sent,1===n.code?(a=n.data,e.tableList=a.categoryList.sort((function(e,t){return e.index-t.index})),e.total=a.total):e.$message.error(n.msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error("发生错误");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()}},created:function(){this.getCategory()}},g=f,m=(0,u.Z)(g,n,a,!1,null,"e1dc3daa",null),v=m.exports},9587:function(e,t,r){var n=r(614),a=r(111),i=r(7674);e.exports=function(e,t,r){var o,s;return i&&n(o=t.constructor)&&o!==r&&a(s=o.prototype)&&s!==r.prototype&&i(e,s),e}},3111:function(e,t,r){var n=r(1702),a=r(4488),i=r(1340),o=r(1361),s=n("".replace),l="["+o+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e){return function(t){var r=i(a(t));return 1&e&&(r=s(r,c,"")),2&e&&(r=s(r,u,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},863:function(e,t,r){var n=r(1702);e.exports=n(1..valueOf)},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9653:function(e,t,r){"use strict";var n=r(9781),a=r(7854),i=r(1702),o=r(4705),s=r(8052),l=r(2597),c=r(9587),u=r(7976),d=r(2190),p=r(7593),f=r(7293),g=r(8006).f,m=r(1236).f,v=r(3070).f,h=r(863),b=r(3111).trim,x="Number",y=a[x],C=y.prototype,w=a.TypeError,k=i("".slice),$=i("".charCodeAt),_=function(e){var t=p(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,r,n,a,i,o,s,l,c=p(e,"number");if(d(c))throw w("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=b(c),t=$(c,0),43===t||45===t){if(r=$(c,2),88===r||120===r)return NaN}else if(48===t){switch($(c,1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+c}for(i=k(c,2),o=i.length,s=0;s<o;s++)if(l=$(i,s),l<48||l>a)return NaN;return parseInt(i,n)}return+c};if(o(x,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var N,E=function(e){var t=arguments.length<1?0:y(_(e)),r=this;return u(C,r)&&f((function(){h(r)}))?c(Object(t),r,E):t},R=n?g(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;R.length>A;A++)l(y,N=R[A])&&!l(E,N)&&v(E,N,m(y,N));E.prototype=C,C.constructor=E,s(a,x,E,{constructor:!0})}}}]);